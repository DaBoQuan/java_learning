<%@ page contentType="text/html; charset=UTF-8"%>
<%@ page import="com.eweaver.base.BaseJdbcDao"%>
<%@ page import="java.util.*"%>
<%@ page import="java.text.*"%>
<%@ page import="com.eweaver.base.util.*" %>
<%@ page import="com.eweaver.base.*" %>
<%@ page import="com.eweaver.base.BaseContext" %>
<%@ page import="com.eweaver.base.label.service.LabelService" %>
<%@ page import="com.eweaver.base.security.service.acegi.EweaverUser" %>
<%@ page import="com.eweaver.humres.base.model.Humres" %>
<%@ page import="com.eweaver.humres.base.service.HumresService" %>
<%@ page import="com.eweaver.base.setitem.service.SetitemService"%>
<%@ page import="com.eweaver.base.util.DateHelper"%>

<%
//String applyorder=StringHelper.null2String(request.getParameter("imgoodnos"));
String requestid=StringHelper.null2String(request.getParameter("requestid"));
//System.out.println(applyorder);
BaseJdbcDao baseJdbc = (BaseJdbcDao) BaseContext.getBean("baseJdbcDao");
%>
<style type="text/css"> 


tr.tr1{     
    TEXT-INDENT: -1pt; 
    TEXT-ALIGN: left; 
    height: 22px; 
    background-color:#f8f8f0; 
} 
tr.title{ 
	font-size:12px; 
	font-weight:bold;
    TEXT-INDENT: -1pt; 
    TEXT-ALIGN: left; 
    height: 22px; 
    background-color:#f8f8f0; 
} 
tr.hj{     
    TEXT-INDENT: -1pt; 
    TEXT-ALIGN: left; 
    height: 22px; 
    background-color:#e46d0a; 
} 
td.td1{ 
    font-size:12px; 
    PADDING-RIGHT: 4px; 
    PADDING-LEFT: 4px;     
    TEXT-DECORATION: none 

} 
td.td2{ 
	height: 22px;
    font-size:12px; 
    PADDING-RIGHT: 4px; 
    PADDING-LEFT: 4px;     
    TEXT-DECORATION: none; 
    color:#000; 

} 


</style>
<script type='text/javascript' language="javascript"></script>

<Div id="warpp" >
<Table id="oTable40285a8d5763da3c01576e3876b22e39" style="BORDER-COLLAPSE: collapse" border=1 cellSpacing=0 cellPadding=0  style="width: 100%;font-size:12" >
<COLGROUP>
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="6%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="6%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
<COL width="4%">
</COLGROUP>



<TR  class="tr1">
<TD  noWrap class="td2"><INPUT id=check_node_all onclick="selectAll(this,'40285a8d5763da3c01576e3876b22e39')" value=-1 type=checkbox name=check_node_all>Serial Number</TD>
<TD  noWrap class="td2">Order NO</TD>
<TD  noWrap class="td2">Order Item</TD>
<TD  noWrap class="td2">ImportArrange Number</TD>
<TD  noWrap class="td2">K1 Form Number</TD>
<TD  noWrap class="td2">K1 Form Date</TD>
<TD  noWrap class="td2">Fee Name</TD>
<TD  noWrap class="td2">Payment Object</TD>
<TD  noWrap class="td2">Tax Code</TD>
<TD  noWrap class="td2">Tax Rate</TD>
<TD  noWrap class="td2">Estimate Currency</TD>
<TD  noWrap class="td2">Estimate Amount</TD>
<TD  noWrap class="td2">Estimate Rate</TD>
<TD  noWrap class="td2">Estimate Amount(Local Currency)</TD>
<TD  noWrap class="td2">Clear Currency</TD>
<TD  noWrap class="td2">Clear Amount</TD>
<TD  noWrap class="td2">Clear Rate</TD>
<TD  noWrap class="td2">Clear Amount(Local Currency)</TD>
<TD  noWrap class="td2">Cost Center</TD>
<TD  noWrap class="td2">Material</TD>
<TD  noWrap class="td2">Subject</TD>
<TD  noWrap class="td2">Business Currency(Difference)</TD>
<TD  noWrap class="td2">Local Currency(Difference)</TD>
<TD  noWrap class="td2">Remark</TD>
</TR>

<%
//String sql="select a.imgoodsid,a.imgoodsitem,(select feename from uf_dmdb_feename where requestid=a.feetype)feename,a.payobject,a.estcurrency,a.estmoney,a.estrate,a.estamount,a.clearmoney,a.clearamount,a.buscurrencydiff,a.currencydiff,a.materialid,a.costcenter,a.assetid,a.innerorderid,a.ledgersubject,a.purorderid,a.purorderitem from uf_dmph_iccdetail a";


//String sql="select sno,imgoodsid,imgoodsitem,feetype,(select t.feename from uf_dmdb_feename t where t.requestid=feetype)feetxt,payobject,estcurrency,estmoney,estrate,estamount,clearmoney,clearamount,buscurrencydiff,currencydiff,materialid,costcenter,assetid,innerorderid,ledgersubject,purorderid,purorderitem,kjrequest,ddate from uf_dmph_iccdetail where requestid='"+requestid+"' order by sno";
  
  
  
  
String sno = "";//序号
String ordno = "";//采购订单号
String orditem = "";//订单项次
String imarrno = "";//进口提单编号
String bgno = "";//报关单号
String bgdate = "";//报关日期
String feename = "";//费用类型
String payobj = "";//支付对象
String zgcurr = "";//暂估币种
String zgrate = "";//暂估汇率
String zgamount = "";//暂估金额
String zgbwb = "";//暂估本位币
String costcenter = "";//成本中心
String taxid = "";//税码(id)
String taxtxt = "";//税码(txt)
String taxrate = "";//税率
String material = "";//物料号
String subject = "";//总账科目
String busdiff = "";//业务货币差额
String bwbdiff = "";//本位币差额
String remark = "";//备注
String clearcurr = "";//清帐币种
String clearamount = "";//清帐金额
String clearrate = "";//清帐汇率
String clearbwb = "";//清帐本位币

//String tolzgbwb = "";//暂估本位币合计
//String tolqzbwb = "";//清帐本位币合计
  
  
//String sql = "select * from uf_dmph_iccdetail where requestid='"+requestid+"' order by sno";
String sql = "select a.sno,a.purorderid,a.purorderitem,a.imarrno,a.k1number,a.ddate,a.feetype,a.payobject,a.qzsm as taxid,(select tax from uf_dmsd_taxwh where requestid=a.qzsm)taxtxt,a.qzsl,a.estcurrency,a.estmoney,a.estrate,a.estamount,a.qzcurr,a.clearmoney,a.qzrate,a.clearamount,a.costcenter,a.materialid,a.ledgersubject,a.buscurrencydiff,a.currencydiff,a.remark from uf_dmph_iccdetail a where a.requestid='"+requestid+"' order by a.sno";
List sublist = baseJdbc.executeSqlForList(sql);
if(sublist.size()>0)
{
	for(int k=0,sizek=sublist.size();k<sizek;k++)
	{
		Map mk = (Map)sublist.get(k);

		sno = StringHelper.null2String(mk.get("sno"));//序号
		ordno = StringHelper.null2String(mk.get("purorderid"));//采购订单号
		orditem = StringHelper.null2String(mk.get("purorderitem"));//采购订单项次
		imarrno = StringHelper.null2String(mk.get("imarrno"));//进口提单号
		bgno = StringHelper.null2String(mk.get("k1number"));//K1 Form Number
		bgdate = StringHelper.null2String(mk.get("ddate"));//K1 Form Date
		feename = StringHelper.null2String(mk.get("feetype"));//费用类型
		payobj = StringHelper.null2String(mk.get("payobject"));//支付对象
		taxid = StringHelper.null2String(mk.get("taxid"));//税码(id)
		taxtxt = StringHelper.null2String(mk.get("taxtxt"));//税码(txt)
		taxrate = StringHelper.null2String(mk.get("qzsl"));//税率
		zgcurr = StringHelper.null2String(mk.get("estcurrency"));//暂估币种
		zgamount = StringHelper.null2String(mk.get("estmoney"));//暂估金额
		zgrate = StringHelper.null2String(mk.get("estrate"));//暂估汇率
		
		zgbwb = StringHelper.null2String(mk.get("estamount"));//暂估本位币
		//tolzgbwb = tolzgbwb + Double.valueOf(zgbwb);//暂估本位币合计
		
		clearcurr = StringHelper.null2String(mk.get("qzcurr"));//清帐币种
		clearamount = StringHelper.null2String(mk.get("clearmoney"));//清帐金额
		clearrate = StringHelper.null2String(mk.get("qzrate"));//清帐汇率
		
		clearbwb = StringHelper.null2String(mk.get("clearamount"));//清帐本位币
		//tolqzbwb = tolqzbwb + Double.valueOf(clearbwb);//清帐本位币合计
		
		costcenter = StringHelper.null2String(mk.get("costcenter"));//成本中心
		material = StringHelper.null2String(mk.get("materialid"));//物料号
		subject = StringHelper.null2String(mk.get("ledgersubject"));//总账科目
		busdiff = StringHelper.null2String(mk.get("buscurrencydiff"));//业务货币差额
		bwbdiff = StringHelper.null2String(mk.get("currencydiff"));//本位币差额
		remark = StringHelper.null2String(mk.get("remark"));//备注
		
		
%>

<TR id=oTR40285a8d5763da3c01576e3876b22e39 class=DataLight><!-- 明细表ID，请勿删除。-->
<!--Serial Number-->
<TD noWrap><span ><input type="checkbox" name="check_node_40285a8d5763da3c01576e3876b22e39" value="<%=k%>"><input type=hidden name="detailid_40285a8d5763da3c01576e3876b22e39_0" value="<%=k%>"></span><input type="hidden" id=<%="field_40285a8d5763da3c01576e3876f92e3a_"+k%> name=<%="field_40285a8d5763da3c01576e3876f92e3a_"+k%> value="<%=sno%>" maxlength=24  ><span style='width: 60%' id=<%="field_40285a8d5763da3c01576e3876f92e3a_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3876f92e3a_"+k+"span"%> ><%=sno%></span></TD>
<!--Order NO-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e38793d2e5e_"+k%> name=<%="field_40285a8d5763da3c01576e38793d2e5e_"+k%>  value="<%=ordno%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e38793d2e5e_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e38793d2e5e_"+k+"span"%> ><%=ordno%></span></TD>
<!--Order Item-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3879652e60_"+k%> name=<%="field_40285a8d5763da3c01576e3879652e60_"+k%>  value="<%=orditem%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3879652e60_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3879652e60_"+k+"span"%> ><%=orditem%></span></TD>
<!--ImportArrange Number-->
<TD noWrap><input type="hidden" id=<%="field_40285a8c60b5859d0160bae743351ad8_"+k%> name=<%="field_40285a8c60b5859d0160bae743351ad8_"+k%>  value="<%=imarrno%>"  ><span style='width: 80%' id=<%="field_40285a8c60b5859d0160bae743351ad8_"+k+"span"%> name=<%="field_40285a8c60b5859d0160bae743351ad8_"+k+"span"%> ><%=imarrno%></span></TD>
<!--K1 Form Number-->
<TD noWrap><input type="hidden" id=<%="field_40285a8c60b5859d0160bae743741ada_"+k%> name=<%="field_40285a8c60b5859d0160bae743741ada_"+k%>  value="<%=bgno%>"  ><span style='width: 80%' id=<%="field_40285a8c60b5859d0160bae743741ada_"+k+"span"%> name=<%="field_40285a8c60b5859d0160bae743741ada_"+k+"span"%> ><%=bgno%></span></TD>
<!--K1 Form Date-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5ac62b7f015ac692b2d60476_"+k%> name=<%="field_40285a8d5ac62b7f015ac692b2d60476_"+k%>  value="<%=bgdate%>"  ><span style='width: 80%' id=<%="field_40285a8d5ac62b7f015ac692b2d60476_"+k+"span"%> name=<%="field_40285a8d5ac62b7f015ac692b2d60476_"+k+"span"%> ><%=bgdate%></span></TD>
<!--Fee Name-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3877602e40_"+k%> name=<%="field_40285a8d5763da3c01576e3877602e40_"+k%>  value="<%=feename%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3877602e40_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3877602e40_"+k+"span"%> ><%=feename%></span></TD>
<!--Payment Object-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3877842e42_"+k%> name=<%="field_40285a8d5763da3c01576e3877842e42_"+k%>  value="<%=payobj%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3877842e42_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3877842e42_"+k+"span"%> ><%=payobj%></span></TD>
<!--Tax Code-->
<TD noWrap><input type="hidden" id=<%="field_40285a8c60b5859d0160baebd0901ae0_"+k%> name=<%="field_40285a8c60b5859d0160baebd0901ae0_"+k%>  value="<%=taxid%>"  ><span style='width: 80%' id=<%="field_40285a8c60b5859d0160baebd0901ae0_"+k+"span"%> name=<%="field_40285a8c60b5859d0160baebd0901ae0_"+k+"span"%> ><%=taxtxt%></span></TD>
<!--Tax Rate-->
<TD noWrap><input type="hidden" id=<%="field_40285a8c60b5859d0160baebd0ce1ae2_"+k%> name=<%="field_40285a8c60b5859d0160baebd0ce1ae2_"+k%>  value="<%=taxrate%>"  ><span style='width: 80%' id=<%="field_40285a8c60b5859d0160baebd0ce1ae2_"+k+"span"%> name=<%="field_40285a8c60b5859d0160baebd0ce1ae2_"+k+"span"%> ><%=taxrate%></span></TD>
<!--Estimate Currency-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3877a72e44_"+k%> name=<%="field_40285a8d5763da3c01576e3877a72e44_"+k%>  value="<%=zgcurr%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3877a72e44_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3877a72e44_"+k+"span"%> ><%=zgcurr%></span></TD>
<!--Estimate Amount-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3877cc2e46_"+k%> name=<%="field_40285a8d5763da3c01576e3877cc2e46_"+k%>  value="<%=zgamount%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3877cc2e46_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3877cc2e46_"+k+"span"%> ><%=zgamount%></span></TD>
<!--Estimate Rate-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3877f02e48_"+k%> name=<%="field_40285a8d5763da3c01576e3877f02e48_"+k%>  value="<%=zgrate%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3877f02e48_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3877f02e48_"+k+"span"%> ><%=zgrate%></span></TD>
<!--Estimate Amount(Local Currency)-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3878142e4a_"+k%> name=<%="field_40285a8d5763da3c01576e3878142e4a_"+k%>  value="<%=zgbwb%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3878142e4a_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3878142e4a_"+k+"span"%> ><%=zgbwb%></span></TD>
<!--Clear Currency-->
<TD noWrap><input type="hidden" id=<%="field_40285a8c60b5859d0160c8db485325ad_"+k%> name=<%="field_40285a8c60b5859d0160c8db485325ad_"+k%>  value="<%=clearcurr%>"  ><span style='width: 80%' id=<%="field_40285a8c60b5859d0160c8db485325ad_"+k+"span"%> name=<%="field_40285a8c60b5859d0160c8db485325ad_"+k+"span"%> ><%=clearcurr%></span></TD>
<!--Clear Amount-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3878392e4c_"+k%> name=<%="field_40285a8d5763da3c01576e3878392e4c_"+k%>  value="<%=clearamount%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3878392e4c_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3878392e4c_"+k+"span"%> ><%=clearamount%></span></TD>
<!--Clear Rate-->
<TD noWrap><input type="hidden" id=<%="field_40285a8c60b5859d0160bb0962901b56_"+k%> name=<%="field_40285a8c60b5859d0160bb0962901b56_"+k%>  value="<%=clearrate%>"  ><span style='width: 80%' id=<%="field_40285a8c60b5859d0160bb0962901b56_"+k+"span"%> name=<%="field_40285a8c60b5859d0160bb0962901b56_"+k+"span"%> ><%=clearrate%></span></TD>
<!--Clear Amount(Local Currency)-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3878612e4e_"+k%> name=<%="field_40285a8d5763da3c01576e3878612e4e_"+k%>  value="<%=clearbwb%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3878612e4e_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3878612e4e_"+k+"span"%> ><%=clearbwb%></span></TD>
<!--Cost Center-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3878ee2e56_"+k%> name=<%="field_40285a8d5763da3c01576e3878ee2e56_"+k%>  value="<%=costcenter%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3878ee2e56_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3878ee2e56_"+k+"span"%> ><%=costcenter%></span></TD>
<!--Material-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3878d72e54_"+k%> name=<%="field_40285a8d5763da3c01576e3878d72e54_"+k%>  value="<%=material%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3878d72e54_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3878d72e54_"+k+"span"%> ><%=material%></span></TD>
<!--Subject-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3879282e5c_"+k%> name=<%="field_40285a8d5763da3c01576e3879282e5c_"+k%>  value="<%=subject%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3879282e5c_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3879282e5c_"+k+"span"%> ><%=subject%></span></TD>
<!--Business Currency(Difference)-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3878882e50_"+k%> name=<%="field_40285a8d5763da3c01576e3878882e50_"+k%>  value="<%=busdiff%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3878882e50_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3878882e50_"+k+"span"%> ><%=busdiff%></span></TD>
<!--Local Currency(Difference)-->
<TD noWrap><input type="hidden" id=<%="field_40285a8d5763da3c01576e3878af2e52_"+k%> name=<%="field_40285a8d5763da3c01576e3878af2e52_"+k%>  value="<%=bwbdiff%>"  ><span style='width: 80%' id=<%="field_40285a8d5763da3c01576e3878af2e52_"+k+"span"%> name=<%="field_40285a8d5763da3c01576e3878af2e52_"+k+"span"%> ><%=bwbdiff%></span></TD>
<!--Remark-->
<TD noWrap><input type="hidden" id=<%="field_40285a8c60b5859d0160baee2b591ae6_"+k%> name=<%="field_40285a8c60b5859d0160baee2b591ae6_"+k%>  value="<%=remark%>"  ><span style='width: 80%' id=<%="field_40285a8c60b5859d0160baee2b591ae6_"+k+"span"%> name=<%="field_40285a8c60b5859d0160baee2b591ae6_"+k+"span"%> ><%=remark%></span></TD>
</TR>
<%		
	}
	
	//String upsql = "update uf_dmph_importchargemain set estamount='"+tolzgbwb+"',allqzrmbmon='"+tolqzbwb+"' where requestid='"+requestid+"'";
	//baseJdbc.update(upsql);

}else{%> 
	<TR class="tr1">
	<TD class="td2" colspan="24">No Message!</TD>
	</TR>
<%} 
%>
</table>
</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     